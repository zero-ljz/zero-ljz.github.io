/* ui-kit.css */
:root {
  --ui-primary: #007bff;
  --ui-success: #28a745;
  --ui-danger: #dc3545;
  --ui-warning: #ffc107;
  --ui-text: #333;
  --ui-bg: #fff;
  --ui-border: #ddd;
  --ui-radius: 6px;
  --ui-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  --ui-mask: rgba(0, 0, 0, 0.5);
  --ui-z-idx-low: 1000;
  --ui-z-idx-mid: 2000;
  --ui-z-idx-high: 3000;
  --ui-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

/* 基础重置 */
.ui-box * { box-sizing: border-box; outline: none; }

/* 动画定义 */
@keyframes ui-fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes ui-slide-up { from { transform: translate(-50%, -40%); opacity: 0; } to { transform: translate(-50%, -50%); opacity: 1; } }
@keyframes ui-slide-in-right { from { transform: translateX(100%); } to { transform: translateX(0); } }

/* 1. 遮罩层 (Modal/Dialog/Loading) */
.ui-mask {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: var(--ui-mask); z-index: var(--ui-z-idx-mid);
  display: flex; align-items: center; justify-content: center;
  animation: ui-fade-in 0.2s ease;
}

/* 2. 对话框/模态框通用容器 */
.ui-dialog {
  background: var(--ui-bg); width: 400px; max-width: 90%;
  border-radius: var(--ui-radius); box-shadow: var(--ui-shadow);
  font-family: var(--ui-font-family); overflow: hidden;
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
  animation: ui-slide-up 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}
.ui-dialog__header { padding: 15px; font-weight: bold; border-bottom: 1px solid var(--ui-border); display: flex; justify-content: space-between; }
.ui-dialog__close { cursor: pointer; border: none; background: transparent; font-size: 1.2rem; }
.ui-dialog__body { padding: 20px; color: var(--ui-text); line-height: 1.5; }
.ui-dialog__footer { padding: 10px 15px; border-top: 1px solid var(--ui-border); display: flex; justify-content: flex-end; gap: 10px; }
.ui-dialog__input { width: 100%; padding: 8px; border: 1px solid var(--ui-border); border-radius: 4px; margin-top: 10px; }

/* 按钮通用样式 */
.ui-btn { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; transition: 0.2s; }
.ui-btn--primary { background: var(--ui-primary); color: #fff; }
.ui-btn--default { background: #f0f0f0; color: #333; }
.ui-btn:hover { opacity: 0.9; }

/* 3. 通知消息 (Toast) */
.ui-toast-container {
  position: fixed; top: 20px; right: 20px; z-index: var(--ui-z-idx-high);
  display: flex; flex-direction: column; gap: 10px;
}
.ui-toast {
  background: var(--ui-bg); padding: 12px 20px; border-radius: var(--ui-radius);
  box-shadow: var(--ui-shadow); border-left: 4px solid var(--ui-primary);
  min-width: 250px; animation: ui-slide-in-right 0.3s ease; position: relative;
}
.ui-toast--success { border-color: var(--ui-success); }
.ui-toast--error { border-color: var(--ui-danger); }

/* 4. 加载提示 (Loading) */
.ui-loading-spinner {
  width: 40px; height: 40px; border: 4px solid #f3f3f3;
  border-top: 4px solid var(--ui-primary); border-radius: 50%;
  animation: ui-spin 1s linear infinite;
}
@keyframes ui-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* 5. 工具提示 & 气泡 (Tooltip/Popover) */
.ui-tooltip {
  position: absolute; background: rgba(0,0,0,0.8); color: #fff;
  padding: 6px 10px; border-radius: 4px; font-size: 12px;
  pointer-events: none; z-index: var(--ui-z-idx-high);
  white-space: nowrap; transform: translate(-50%, -10px);
}
.ui-tooltip::after {
  content: ''; position: absolute; top: 100%; left: 50%; margin-left: -5px;
  border-width: 5px; border-style: solid; border-color: rgba(0,0,0,0.8) transparent transparent transparent;
}

.ui-popover {
  position: absolute; background: #fff; border: 1px solid var(--ui-border);
  box-shadow: var(--ui-shadow); border-radius: var(--ui-radius);
  z-index: var(--ui-z-idx-low); min-width: 150px;
}

/* 6. 上下文菜单 (Context Menu) */
.ui-context-menu {
  position: fixed; background: #fff; border: 1px solid var(--ui-border);
  box-shadow: var(--ui-shadow); border-radius: 4px; padding: 5px 0;
  z-index: var(--ui-z-idx-high); min-width: 160px; display: none;
}
.ui-context-menu__item {
  padding: 8px 15px; cursor: pointer; display: block;
  font-size: 14px; color: var(--ui-text); text-decoration: none;
}
.ui-context-menu__item:hover { background: #f5f5f5; }

/* Drawer */
.ui-drawer {
    position: fixed; top: 0; right: 0; height: 100%;
    background: var(--ui-bg); box-shadow: -4px 0 12px rgba(0,0,0,0.1);
    z-index: var(--ui-z-idx-mid); width: 400px; max-width: 90vw;
    transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    display: flex; flex-direction: column;
}
.ui-drawer--left { right: auto; left: 0; transform: translateX(-100%); }
.ui-drawer--visible { transform: translateX(0) !important; }

.ui-drawer__header { padding: 15px 20px; border-bottom: 1px solid var(--ui-border); display: flex; justify-content: space-between; align-items: center; font-weight: bold; }
.ui-drawer__body { padding: 20px; flex: 1; overflow-y: auto; }
.ui-drawer__close { border: none; background: transparent; font-size: 1.5rem; cursor: pointer; }

/* Tabs */
.ui-tabs { border-bottom: 1px solid var(--ui-border); display: flex; gap: 20px; margin-bottom: 15px; }
.ui-tab-item {
    padding: 10px 0; cursor: pointer; position: relative; color: #666;
    transition: color 0.3s;
}
.ui-tab-item:hover { color: var(--ui-primary); }
.ui-tab-item.active { color: var(--ui-primary); font-weight: 500; }
.ui-tab-item.active::after {
    content: ''; position: absolute; bottom: -1px; left: 0; width: 100%;
    height: 2px; background: var(--ui-primary);
}
.ui-tab-pane { display: none; animation: ui-fade-in 0.3s; }
.ui-tab-pane.active { display: block; }

/* Switch */
.ui-switch { position: relative; display: inline-block; width: 44px; height: 24px; vertical-align: middle; }
.ui-switch input { opacity: 0; width: 0; height: 0; }
.ui-switch__slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background-color: #ccc; transition: .4s; border-radius: 24px;
}
.ui-switch__slider:before {
    position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px;
    background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.ui-switch input:checked + .ui-switch__slider { background-color: var(--ui-primary); }
.ui-switch input:checked + .ui-switch__slider:before { transform: translateX(20px); }
.ui-switch input:disabled + .ui-switch__slider { opacity: 0.5; cursor: not-allowed; }

/* Accordion */
.ui-accordion { border: 1px solid var(--ui-border); border-radius: var(--ui-radius); overflow: hidden; }
.ui-accordion__item { border-bottom: 1px solid var(--ui-border); }
.ui-accordion__item:last-child { border-bottom: none; }
.ui-accordion__header {
    padding: 12px 15px; background: #f9f9f9; cursor: pointer;
    font-weight: 500; display: flex; justify-content: space-between; align-items: center;
}
.ui-accordion__header::after {
    content: '+'; font-size: 1.2rem; transition: transform 0.3s;
}
.ui-accordion__body {
    max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;
    background: #fff; padding: 0 15px;
}
/* 激活状态 */
.ui-accordion__item.active .ui-accordion__header::after { transform: rotate(45deg); }
.ui-accordion__item.active .ui-accordion__body { padding: 15px; max-height: 500px; /* 估算最大高度 */ border-top: 1px solid var(--ui-border); }

/* Select */
.ui-select {
    position: relative; width: 100%; min-width: 200px;
    font-size: 14px; user-select: none;
}
.ui-select__trigger {
    padding: 8px 12px; border: 1px solid var(--ui-border); border-radius: var(--ui-radius);
    background: #fff; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
    transition: border-color 0.2s;
}
.ui-select__trigger:hover { border-color: var(--ui-primary); }
.ui-select.active .ui-select__trigger { border-color: var(--ui-primary); box-shadow: 0 0 0 2px rgba(0,123,255, 0.1); }
.ui-select__trigger::after {
    content: ''; border: 5px solid transparent; border-top-color: #999;
    margin-top: 4px; transition: transform 0.2s;
}
.ui-select.active .ui-select__trigger::after { transform: rotate(180deg); margin-top: -4px; }

.ui-select__options {
    position: absolute; top: 100%; left: 0; right: 0; margin-top: 5px;
    background: #fff; border: 1px solid var(--ui-border); border-radius: var(--ui-radius);
    box-shadow: var(--ui-shadow); z-index: var(--ui-z-idx-low);
    max-height: 250px; overflow-y: auto; display: none;
}
.ui-select.active .ui-select__options { display: block; animation: ui-fade-in 0.2s; }

.ui-select__item { padding: 10px 12px; cursor: pointer; color: var(--ui-text); transition: background 0.1s; }
.ui-select__item:hover { background-color: #f5f5f5; }
.ui-select__item.selected { background-color: #e6f7ff; color: var(--ui-primary); font-weight: 500; }

/* Pagination */
.ui-pagination { display: flex; list-style: none; padding: 0; gap: 8px; align-items: center; user-select: none; }
.ui-page-item {
    min-width: 32px; height: 32px; padding: 0 6px;
    display: flex; align-items: center; justify-content: center;
    border: 1px solid var(--ui-border); border-radius: 4px; cursor: pointer;
    background: #fff; transition: all 0.2s; color: var(--ui-text);
}
.ui-page-item:hover:not(.disabled):not(.active) { border-color: var(--ui-primary); color: var(--ui-primary); }
.ui-page-item.active { background: var(--ui-primary); border-color: var(--ui-primary); color: #fff; cursor: default; }
.ui-page-item.disabled { background: #f5f5f5; color: #ccc; cursor: not-allowed; border-color: #eee; }
.ui-page-dots { border: none; background: transparent; cursor: default; }

/* Breadcrumb */
.ui-breadcrumb { display: flex; flex-wrap: wrap; font-size: 14px; color: #666; }
.ui-breadcrumb__item { display: flex; align-items: center; }
.ui-breadcrumb__link { text-decoration: none; color: #666; transition: color 0.2s; cursor: pointer; }
.ui-breadcrumb__link:hover { color: var(--ui-primary); }
.ui-breadcrumb__separator { margin: 0 8px; color: #ccc; font-size: 12px; }
.ui-breadcrumb__item:last-child .ui-breadcrumb__link { color: var(--ui-text); font-weight: bold; cursor: default; pointer-events: none; }
.ui-breadcrumb__item:last-child .ui-breadcrumb__separator { display: none; }


/* Action Sheet */
.ui-action-sheet {
    position: fixed; left: 0; bottom: 0; width: 100%;
    background: #f7f7f7; z-index: var(--ui-z-idx-high);
    border-radius: 12px 12px 0 0; overflow: hidden;
    transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
}
.ui-action-sheet.visible { transform: translateY(0); }

.ui-action-sheet__item {
    background: #fff; padding: 16px; text-align: center;
    font-size: 16px; border-bottom: 1px solid #eee;
    active-behavior: none; /* 防止点击高亮错位 */
}
.ui-action-sheet__item:active { background: #f0f0f0; }
.ui-action-sheet__item:last-child { border-bottom: none; }
.ui-action-sheet__item--danger { color: var(--ui-danger); }
.ui-action-sheet__cancel { margin-top: 8px; border-top: none; font-weight: bold; }

.ui-tabbar {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 50px;
    background: #fff; border-top: 1px solid #eee; display: flex;
    justify-content: space-around; align-items: center; z-index: var(--ui-z-idx-low);
    padding-bottom: env(safe-area-inset-bottom); /* 适配 iPhone X */
}
.ui-tabbar-item {
    flex: 1; text-align: center; color: #999; font-size: 10px; cursor: pointer;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.ui-tabbar-item.active { color: var(--ui-primary); }
.ui-tabbar-icon { font-size: 20px; margin-bottom: 2px; }


/* =========================================
   Responsive Navigation (Sidebar & Tabbar)
   ========================================= */

/* 通用导航项样式 */
.ui-nav-icon { font-size: 20px; line-height: 1; margin-bottom: 2px; }
.ui-nav-text { font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* --- 1. 侧边栏 (Desktop & Tablet) --- */
.ui-sidebar-nav {
    position: fixed; top: 0; left: 0; height: 100%;
    background: #fff; border-right: 1px solid var(--ui-border);
    z-index: var(--ui-z-idx-low); display: flex; flex-direction: column;
    padding-top: 20px; overflow-y: auto; transition: width 0.3s ease;
    /* 隐藏滚动条但允许滚动 */
    scrollbar-width: none; -ms-overflow-style: none;
}
.ui-sidebar-nav::-webkit-scrollbar { display: none; }

.ui-sidebar-item {
    display: flex; align-items: center; padding: 12px 20px;
    cursor: pointer; color: var(--ui-text-secondary);
    transition: all 0.2s; text-decoration: none;
}
.ui-sidebar-item:hover { background-color: #f5f5f5; color: var(--ui-primary); }
.ui-sidebar-item.active { background-color: #e6f7ff; color: var(--ui-primary); border-right: 3px solid var(--ui-primary); }
.ui-sidebar-item .ui-nav-icon { margin-right: 12px; margin-bottom: 0; width: 24px; text-align: center; }
.ui-sidebar-item .ui-nav-text { font-size: 14px; opacity: 1; transition: opacity 0.2s; }

/* --- 2. 底部栏 (Mobile) --- */
.ui-bottom-nav {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 50px;
    background: #fff; border-top: 1px solid var(--ui-border);
    z-index: var(--ui-z-idx-low); display: none; /* 默认隐藏 */
    padding-bottom: env(safe-area-inset-bottom);
}
.ui-bottom-item {
    flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
    color: #999; cursor: pointer; -webkit-tap-highlight-color: transparent;
}
.ui-bottom-item.active { color: var(--ui-primary); }

/* --- 响应式断点控制 --- */

/* A. 大屏幕 (Desktop): 完整侧边栏 */
@media (min-width: 992px) {
    .ui-sidebar-nav { width: 240px; }
    .ui-app-layout { padding-left: 240px; } /* 给内容留位 */
}

/* B. 中屏幕 (Tablet): 收缩侧边栏 */
@media (min-width: 768px) and (max-width: 991px) {
    .ui-sidebar-nav { width: 64px; }
    .ui-sidebar-item { padding: 15px 0; justify-content: center; }
    .ui-sidebar-item .ui-nav-icon { margin-right: 0; font-size: 24px; }
    .ui-sidebar-item .ui-nav-text { display: none; /* 隐藏文字 */ }
    .ui-app-layout { padding-left: 64px; }
}

/* C. 小屏幕 (Mobile): 隐藏侧边栏，显示底部栏 */
@media (max-width: 767px) {
    .ui-sidebar-nav { display: none; }
    .ui-bottom-nav { display: flex; }
    .ui-app-layout { padding-left: 0; padding-bottom: 60px; } /* 给底部留位 */
}


/* 文件上传区域 */
.ui-upload {
    border: 2px dashed var(--ui-border); border-radius: var(--ui-radius);
    padding: 30px; text-align: center; cursor: pointer; transition: all 0.2s;
    background: #fafafa; position: relative;
}
.ui-upload:hover, .ui-upload.drag-over { border-color: var(--ui-primary); background: rgba(var(--ui-primary-rgb), 0.05); }
.ui-upload__icon { font-size: 32px; color: #ccc; margin-bottom: 10px; }
.ui-upload__text { font-size: 14px; color: #666; }
.ui-upload input { display: none; }

